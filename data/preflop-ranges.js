/**
 * GTO Preflop Ranges — 6-max NLH (100BB standard)
 * 숫자로 시작하는 키는 모두 문자열로 처리
 */

/**
 * RFI (Raise First In) 레인지 — 아무도 들어오지 않았을 때 오픈 레이즈 확률
 * 값: 0.0 ~ 1.0
 */
export const RFI_RANGES = {
  UTG: {
    AA: 1.0, KK: 1.0, QQ: 1.0, JJ: 1.0, TT: 1.0,
    AKs: 1.0, AQs: 1.0, AJs: 1.0, ATs: 1.0, A9s: 0.5, A8s: 0.3, A5s: 0.5, A4s: 0.3, A3s: 0.2, A2s: 0.2,
    AKo: 1.0, AQo: 1.0, AJo: 0.8, ATo: 0.5,
    KQs: 1.0, KJs: 1.0, KTs: 0.8, K9s: 0.3,
    KQo: 0.8, KJo: 0.5,
    QJs: 1.0, QTs: 0.8, Q9s: 0.3,
    QJo: 0.4,
    JTs: 1.0, J9s: 0.3,
    T9s: 0.5,
    '99': 1.0, '98s': 0.3,
    '88': 0.8, '87s': 0.2,
    '77': 0.6,
    '66': 0.3,
    '55': 0.2,
  },

  HJ: {
    AA: 1.0, KK: 1.0, QQ: 1.0, JJ: 1.0, TT: 1.0, '99': 1.0, '88': 1.0,
    AKs: 1.0, AQs: 1.0, AJs: 1.0, ATs: 1.0, A9s: 0.8, A8s: 0.6, A7s: 0.4, A6s: 0.4, A5s: 0.8, A4s: 0.5, A3s: 0.4, A2s: 0.3,
    AKo: 1.0, AQo: 1.0, AJo: 1.0, ATo: 0.8, A9o: 0.3,
    KQs: 1.0, KJs: 1.0, KTs: 1.0, K9s: 0.6, K8s: 0.3,
    KQo: 1.0, KJo: 0.7, KTo: 0.4,
    QJs: 1.0, QTs: 1.0, Q9s: 0.6, Q8s: 0.2,
    QJo: 0.7, QTo: 0.3,
    JTs: 1.0, J9s: 0.7, J8s: 0.3,
    JTo: 0.5,
    T9s: 0.8, T8s: 0.5,
    '98s': 0.7, '97s': 0.3,
    '87s': 0.6, '86s': 0.2,
    '77': 0.9, '66': 0.6, '55': 0.4,
  },

  CO: {
    AA: 1.0, KK: 1.0, QQ: 1.0, JJ: 1.0, TT: 1.0, '99': 1.0, '88': 1.0, '77': 1.0, '66': 1.0,
    AKs: 1.0, AQs: 1.0, AJs: 1.0, ATs: 1.0, A9s: 1.0, A8s: 0.8, A7s: 0.7, A6s: 0.7, A5s: 1.0, A4s: 0.8, A3s: 0.7, A2s: 0.5,
    AKo: 1.0, AQo: 1.0, AJo: 1.0, ATo: 1.0, A9o: 0.6, A8o: 0.3,
    KQs: 1.0, KJs: 1.0, KTs: 1.0, K9s: 0.9, K8s: 0.6, K7s: 0.4, K6s: 0.3, K5s: 0.4, K4s: 0.3,
    KQo: 1.0, KJo: 1.0, KTo: 0.8, K9o: 0.3,
    QJs: 1.0, QTs: 1.0, Q9s: 0.9, Q8s: 0.5, Q7s: 0.3,
    QJo: 1.0, QTo: 0.7, Q9o: 0.2,
    JTs: 1.0, J9s: 1.0, J8s: 0.6, J7s: 0.3,
    JTo: 0.9, J9o: 0.4,
    T9s: 1.0, T8s: 0.8, T7s: 0.4,
    T9o: 0.5,
    '98s': 0.9, '97s': 0.6, '96s': 0.3,
    '87s': 0.8, '86s': 0.4,
    '76s': 0.7, '75s': 0.3,
    '65s': 0.6, '54s': 0.5,
    '55': 0.9, '44': 0.7, '33': 0.5, '22': 0.4,
  },

  BTN: {
    AA: 1.0, KK: 1.0, QQ: 1.0, JJ: 1.0, TT: 1.0, '99': 1.0, '88': 1.0, '77': 1.0, '66': 1.0, '55': 1.0, '44': 0.9, '33': 0.8, '22': 0.7,
    AKs: 1.0, AQs: 1.0, AJs: 1.0, ATs: 1.0, A9s: 1.0, A8s: 1.0, A7s: 1.0, A6s: 1.0, A5s: 1.0, A4s: 1.0, A3s: 1.0, A2s: 1.0,
    AKo: 1.0, AQo: 1.0, AJo: 1.0, ATo: 1.0, A9o: 0.9, A8o: 0.8, A7o: 0.6, A6o: 0.5, A5o: 0.7, A4o: 0.6, A3o: 0.5, A2o: 0.4,
    KQs: 1.0, KJs: 1.0, KTs: 1.0, K9s: 1.0, K8s: 0.9, K7s: 0.8, K6s: 0.7, K5s: 0.8, K4s: 0.6, K3s: 0.5, K2s: 0.4,
    KQo: 1.0, KJo: 1.0, KTo: 1.0, K9o: 0.8, K8o: 0.5, K7o: 0.3,
    QJs: 1.0, QTs: 1.0, Q9s: 1.0, Q8s: 0.9, Q7s: 0.7, Q6s: 0.5, Q5s: 0.4,
    QJo: 1.0, QTo: 0.9, Q9o: 0.7, Q8o: 0.4,
    JTs: 1.0, J9s: 1.0, J8s: 0.9, J7s: 0.7, J6s: 0.4,
    JTo: 1.0, J9o: 0.8, J8o: 0.5,
    T9s: 1.0, T8s: 1.0, T7s: 0.8, T6s: 0.5,
    T9o: 0.9, T8o: 0.5,
    '98s': 1.0, '97s': 0.9, '96s': 0.7, '95s': 0.4,
    '87s': 1.0, '86s': 0.8, '85s': 0.5,
    '76s': 0.9, '75s': 0.7, '74s': 0.3,
    '65s': 0.9, '64s': 0.5,
    '54s': 0.8, '53s': 0.5,
    '43s': 0.5, '32s': 0.3,
  },

  SB: {
    AA: 1.0, KK: 1.0, QQ: 1.0, JJ: 1.0, TT: 1.0, '99': 1.0, '88': 1.0, '77': 0.9, '66': 0.8, '55': 0.7, '44': 0.6, '33': 0.5, '22': 0.4,
    AKs: 1.0, AQs: 1.0, AJs: 1.0, ATs: 1.0, A9s: 1.0, A8s: 0.9, A7s: 0.8, A6s: 0.8, A5s: 1.0, A4s: 0.9, A3s: 0.8, A2s: 0.7,
    AKo: 1.0, AQo: 1.0, AJo: 1.0, ATo: 0.9, A9o: 0.7, A8o: 0.5, A7o: 0.4,
    KQs: 1.0, KJs: 1.0, KTs: 1.0, K9s: 0.9, K8s: 0.7, K7s: 0.6, K6s: 0.5, K5s: 0.6, K4s: 0.4, K3s: 0.3, K2s: 0.3,
    KQo: 1.0, KJo: 0.9, KTo: 0.7, K9o: 0.5, K8o: 0.3,
    QJs: 1.0, QTs: 1.0, Q9s: 0.9, Q8s: 0.7, Q7s: 0.5, Q6s: 0.3,
    QJo: 0.9, QTo: 0.7, Q9o: 0.5,
    JTs: 1.0, J9s: 0.9, J8s: 0.7, J7s: 0.5,
    JTo: 0.8, J9o: 0.5,
    T9s: 0.9, T8s: 0.8, T7s: 0.5,
    T9o: 0.6,
    '98s': 0.9, '97s': 0.7, '96s': 0.4,
    '87s': 0.8, '86s': 0.5,
    '76s': 0.7, '75s': 0.4,
    '65s': 0.7, '64s': 0.3,
    '54s': 0.6, '53s': 0.3,
  },
};

/**
 * 주어진 포지션에서 핸드의 GTO 오픈 레이즈 확률 반환
 */
export function getOpenRaiseFrequency(position, hand) {
  const range = RFI_RANGES[position];
  if (!range) return 0;
  return range[hand] ?? 0;
}

/**
 * GTO 봇 액션 결정 — 프리플랍 RFI
 */
export function decidePreflopRFIAction(position, hand) {
  const freq = getOpenRaiseFrequency(position, hand);
  return Math.random() < freq ? 'raise' : 'fold';
}
